{"file":"useCompare-CHcHewrE.js","mappings":";AAQA,MAAM,YAAY;AAClB,MAAM,QAAQ,IAAmB,EAAE;AAyBnC,SAAS,IAAI,SAAsB;AACjC,MAAI,MAAM,MAAM,KAAK,CAAC,MAAM,EAAE,OAAO,QAAQ,EAAE,GAAG;AAChD,WAAO,EAAE,IAAI,OAAO,QAAQ,SAAA;AAAA,EAC9B;AACA,MAAI,MAAM,MAAM,UAAU,WAAW;AACnC,WAAO,EAAE,IAAI,OAAO,QAAQ,OAAA;AAAA,EAC9B;AACA,QAAM,MAAM,KAAK,OAAO;AAExB,SAAO,EAAE,IAAI,KAAA;AACf;AAEA,SAAS,OAAO,IAAuB;AACrC,QAAM,QAAQ,MAAM,MAAM,OAAO,CAAC,MAAM,EAAE,OAAO,EAAE;AAErD;AAEA,SAAS,QAAQ;AACf,QAAM,QAAQ,CAAA;AAEhB;AAEA,MAAM,QAAQ,SAAS,MAAM,MAAM,MAAM,MAAM;AAC/C,MAAM,SAAS,SAAS,MAAM,MAAM,SAAS,SAAS;AACtD,MAAM,aAAa,SAAS,MAAM,MAAM,SAAS,CAAC;AAClD,MAAM,MAAM,CAAC,OAA0B,MAAM,MAAM,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE;AAEnE,SAAS,aAAa;AAC3B,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ;","names":[],"sources":["../../../../../../../app/composables/useCompare.ts"],"sourcesContent":["import { ref, computed } from 'vue';\n\nexport interface CompareItem {\n  id: string | number;\n  title: string;\n  brand?: string;\n}\n\nconst MAX_ITEMS = 3;\nconst items = ref<CompareItem[]>([]);\n\n// Load persisted items (client-side only)\nif (typeof window !== 'undefined') {\n  try {\n    const saved = window.localStorage.getItem('compare-items');\n    if (saved) {\n      const parsed: CompareItem[] = JSON.parse(saved);\n      items.value = Array.isArray(parsed) ? parsed.slice(0, MAX_ITEMS) : [];\n    }\n  } catch (_) {\n    // ignore\n  }\n}\n\nfunction persist() {\n  if (typeof window !== 'undefined') {\n    try {\n      window.localStorage.setItem('compare-items', JSON.stringify(items.value));\n    } catch (_) {\n      // ignore\n    }\n  }\n}\n\nfunction add(product: CompareItem) {\n  if (items.value.find((p) => p.id === product.id)) {\n    return { ok: false, reason: 'exists' as const };\n  }\n  if (items.value.length >= MAX_ITEMS) {\n    return { ok: false, reason: 'full' as const };\n  }\n  items.value.push(product);\n  persist();\n  return { ok: true as const };\n}\n\nfunction remove(id: CompareItem['id']) {\n  items.value = items.value.filter((p) => p.id !== id);\n  persist();\n}\n\nfunction clear() {\n  items.value = [];\n  persist();\n}\n\nconst count = computed(() => items.value.length);\nconst isFull = computed(() => count.value >= MAX_ITEMS);\nconst canCompare = computed(() => count.value >= 2);\nconst has = (id: CompareItem['id']) => items.value.some((p) => p.id === id);\n\nexport function useCompare() {\n  return {\n    items,\n    add,\n    remove,\n    clear,\n    count,\n    isFull,\n    canCompare,\n    has,\n    MAX_ITEMS,\n  };\n}"],"version":3}