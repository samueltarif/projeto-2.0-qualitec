import{d as Y,r as _,k as I,ag as ue,a1 as de,o as ye,y as r,z as a,A as e,S as se,B as p,F as D,ah as Se,M as U,ab as K,ac as ee,ai as he,aj as pe,_ as re,I as P,G as Ee,L as X,D as A,E as J,R as G,ak as Ie,al as Ae,W as je,e as Be,C as M,am as Me,T as ke,an as Te,ao as Oe,O as _e,U as Fe,K as Le,Q as De,V as me}from"#entry";import{u as fe}from"./CplQdjgz.js";const Ue={class:"self-start w-full md:w-40 lg:w-48 xl:w-[14rem] bg-white/60 dark:bg-neutral-900/40 backdrop-blur-md shadow-lg rounded-xl border border-white/25 dark:border-white/10 px-4 sm:px-5 py-4 sm:py-5 md:sticky md:top-20",style:{"margin-top":"5cm"}},Ne={class:"flex items-center justify-between mb-3"},qe={class:"flex items-center gap-2"},ze=["aria-expanded"],Re={class:"hidden sm:inline"},Ve={id:"filters-panel",class:"transition-opacity duration-200"},Qe={class:"text-xs text-neutral-600 dark:text-neutral-300 mb-4"},Ge={key:0,class:"text-xs text-blue-600 mb-2"},He=["value"],We={key:1,class:"space-y-4"},Je={class:"block text-sm font-bold text-neutral-700 dark:text-neutral-200 mb-1"},Ke={key:0,class:"relative"},Xe=["onUpdate:modelValue","placeholder"],Ye={key:1,class:"relative"},Ze=["onUpdate:modelValue"],et={value:""},tt=["value"],at={class:"pt-2 flex items-center gap-3"},oe=7,ot=3,st=Y({__name:"CatalogFilterSidebar",props:{resultsCount:{default:0},currentPage:{default:1},pageSize:{default:12}},emits:["filters-change"],setup(v,{emit:w}){const n=_(["Todas as categorias","ManÃ´metros"]),c=_("ManÃ´metros"),C=_(!1),S=I(()=>C.value?"Expandir":"");function j(){C.value=!C.value,console.log("Painel colapsado:",C.value)}const u=ue({part_number:[],faixa_trabalho:[],fabricante:[],tipo_medicao:[],diametro_montagem:[],posicao_montagem:[],conexao_instrumento:[],visor:[],classe_exatidao:[],material_involucro:[],material_internos:[],unidade_leitura:[],glicerina:["Sim","NÃ£o"],certificados:[],tubo_sifao:["Sim","NÃ£o"],selo_diafragma:["Sim","NÃ£o"],contato_eletrico:["Sim","NÃ£o"],valvula_isolamento:["Sim","NÃ£o"]}),T=ue({}),N=ue({}),E=I(()=>[{key:"part_number",label:"Part Number",type:"text",placeholder:"Digite o part number..."},{key:"faixa_trabalho",label:"Faixa de Trabalho",type:"select",options:u.faixa_trabalho,firstOption:"Todas as faixas"},{key:"fabricante",label:"Fabricante",type:"select",options:u.fabricante},{key:"tipo_medicao",label:"Tipo de MediÃ§Ã£o",type:"select",options:u.tipo_medicao},{key:"diametro_montagem",label:"DiÃ¢metro de Montagem",type:"select",options:u.diametro_montagem},{key:"posicao_montagem",label:"PosiÃ§Ã£o de Montagem",type:"select",options:u.posicao_montagem},{key:"conexao_instrumento",label:"ConexÃ£o do Instrumento",type:"select",options:u.conexao_instrumento},{key:"visor",label:"Visor",type:"select",options:u.visor},{key:"classe_exatidao",label:"Classe de ExatidÃ£o",type:"select",options:u.classe_exatidao},{key:"material_involucro",label:"Material do InvÃ³lucro",type:"select",options:u.material_involucro},{key:"material_internos",label:"Material dos Internos",type:"select",options:u.material_internos},{key:"unidade_leitura",label:"Unidade de Leitura",type:"select",options:u.unidade_leitura},{key:"glicerina",label:"Enchimento de Glicerina",type:"select",options:u.glicerina},{key:"certificados",label:"Certificados",type:"select",options:u.certificados},{key:"tubo_sifao",label:"Tubo SifÃ£o",type:"select",options:u.tubo_sifao},{key:"selo_diafragma",label:"Selo Diafragma",type:"select",options:u.selo_diafragma},{key:"contato_eletrico",label:"Contato ElÃ©trico",type:"select",options:u.contato_eletrico},{key:"valvula_isolamento",label:"VÃ¡lvula de Isolamento",type:"select",options:u.valvula_isolamento}]),k=I(()=>({ManÃ´metros:E.value})),b=ue({}),B=I(()=>k.value[c.value]||[]),O=I(()=>c.value!=="Todas as categorias");de(B,m=>{console.log("Filtros ativos para",c.value,":",m)},{immediate:!0});const F=_(oe),h=I(()=>{const m=B.value.slice(0,F.value);return console.log("Filtros visÃ­veis:",m),m}),t=I(()=>F.value<B.value.length),o=I(()=>B.value.length>oe&&F.value>oe);function s(){F.value=Math.min(F.value+ot,B.value.length)}function y(){F.value=Math.min(oe,B.value.length)}function q(){Object.keys(b).forEach(m=>{b[m]=null})}const V=v,Q=I(()=>V.resultsCount??0),Z=I(()=>V.currentPage??1),z=I(()=>Math.max(1,Math.ceil(Q.value/(V.pageSize??12)))),H=w;de(c,async()=>{Object.keys(b).forEach(m=>{b[m]=null}),await te(),await l(),F.value=Math.min(oe,B.value.length),H("filters-change",{category:c.value,filters:{...b}})}),de(b,()=>{H("filters-change",{category:c.value,filters:{...b}}),l()},{deep:!0});async function te(){try{const m=await $fetch("/api/produtos/distinct",{params:{categoria:c.value,limit:500}});m&&m.values&&(Object.assign(u,m.values),console.log("Filtros carregados:",m.values))}catch(m){console.error("Erro ao carregar filtros:",m)}}async function l(){try{const m={categoria:c.value,filters:JSON.stringify({...b})},f=await $fetch("/api/produtos/facet-counts",{params:m});f&&f.counts&&f.totals&&(Object.assign(T,f.counts),Object.assign(N,f.totals),console.log("Contagens de filtros carregadas:",f))}catch(m){console.error("Erro ao carregar contagens:",m)}}return ye(async()=>{c.value!=="Todas as categorias"&&(await te(),await l()),F.value=Math.min(oe,B.value.length),H("filters-change",{category:c.value,filters:{...b}})}),(m,f)=>(a(),r("aside",Ue,[e("div",Ne,[f[3]||(f[3]=e("h2",{class:"text-lg font-semibold text-neutral-800 dark:text-neutral-100"},"Filtros",-1)),e("div",qe,[e("button",{type:"button",onClick:j,"aria-expanded":!C.value,"aria-controls":"filters-panel",class:"text-sm text-neutral-600 dark:text-neutral-300 hover:text-neutral-800 dark:hover:text-neutral-100 flex items-center gap-1"},[e("span",Re,p(S.value),1),(a(),r("svg",{class:D(["h-4 w-4 transition-transform",C.value?"rotate-180 neon-green-pulse":"rotate-0"]),viewBox:"0 0 24 24",fill:"none","aria-hidden":"true"},[...f[1]||(f[1]=[e("path",{d:"M6 9l6 6 6-6",stroke:"currentColor","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2))],8,ze),e("button",{type:"button",onClick:q,class:"text-sm text-neutral-600 dark:text-neutral-300 hover:text-red-600 flex items-center gap-1"},[...f[2]||(f[2]=[e("span",{class:"hidden sm:inline"},"Limpar",-1),e("span",{"aria-hidden":""},"ðŸ—‘ï¸",-1)])])])]),se(e("div",Ve,[e("div",Qe,p(Q.value)+" produtos encontrados â€” PÃ¡gina "+p(Z.value)+" de "+p(z.value),1),(a(),r("div",Ge," Painel visÃ­vel: "+p(!C.value)+", Filtros ativos: "+p(B.value.length),1)),f[7]||(f[7]=e("label",{class:"block text-sm font-bold text-neutral-700 dark:text-neutral-200 mb-2"},"Categoria",-1)),se(e("select",{"onUpdate:modelValue":f[0]||(f[0]=$=>c.value=$),class:"w-full rounded-md border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100 focus:ring-2 focus:ring-blue-600 focus:border-blue-600 mb-4"},[(a(!0),r(K,null,ee(n.value,$=>(a(),r("option",{key:$,value:$},p($),9,He))),128))],512),[[he,c.value]]),O.value?(a(),r("div",We,[(a(!0),r(K,null,ee(h.value,$=>(a(),r("div",{key:$.key},[e("label",Je,p($.label),1),$.type==="text"?(a(),r("div",Ke,[f[4]||(f[4]=e("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-neutral-400 dark:text-neutral-500 pointer-events-none",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true"},[e("circle",{cx:"11",cy:"11",r:"7",stroke:"currentColor","stroke-width":"1.5"}),e("line",{x1:"21",y1:"21",x2:"16.5",y2:"16.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1)),se(e("input",{"onUpdate:modelValue":R=>b[$.key]=R,placeholder:$.placeholder||"",class:"w-full rounded-lg border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100 focus:ring-2 focus:ring-blue-600 focus:border-blue-600 py-2.5 pl-10 pr-3"},null,8,Xe),[[pe,b[$.key]]])])):(a(),r("div",Ye,[f[5]||(f[5]=e("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-neutral-400 dark:text-neutral-500 pointer-events-none",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm0 5a1 1 0 011-1h8a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V9zm0 5a1 1 0 011-1h5a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2z"})],-1)),se(e("select",{"onUpdate:modelValue":R=>b[$.key]=R,class:"w-full appearance-none rounded-lg border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100 focus:ring-2 focus:ring-blue-600 focus:border-blue-600 py-2.5 pl-10 pr-10"},[e("option",et,p($.firstOption||"Todos")+" "+p(N[$.key]!=null?` (${N[$.key]})`:""),1),(a(!0),r(K,null,ee($.options,R=>(a(),r("option",{key:R,value:R},p(R)+" "+p(T[$.key]?.[R]!=null?` (${T[$.key][R]})`:""),9,tt))),128))],8,Ze),[[he,b[$.key]]]),f[6]||(f[6]=e("svg",{class:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-neutral-400 dark:text-neutral-500 pointer-events-none",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.25 8.27a.75.75 0 01-.02-1.06z","clip-rule":"evenodd"})],-1))]))]))),128)),e("div",at,[t.value?(a(),r("button",{key:0,type:"button",class:"text-sm font-medium text-blue-600 hover:text-blue-700",onClick:s}," Expandir filtros ")):U("",!0),o.value?(a(),r("button",{key:1,type:"button",class:"text-sm text-neutral-600 dark:text-neutral-300 hover:text-neutral-700",onClick:y}," Mostrar menos ")):U("",!0)])])):U("",!0)],512),[[Se,!C.value]])]))}}),lt=Object.assign(re(st,[["__scopeId","data-v-4d468cbb"]]),{__name:"CatalogFilterSidebar"}),nt=Y({__name:"UiPanel",props:{class:{},variant:{default:"default"},align:{default:"start"}},setup(v){const w=v,n=["bg-white/80 dark:bg-neutral-900/80","backdrop-blur-sm"],c=["bg-gradient-to-b","from-neutral-50/95 to-neutral-100/70","dark:from-neutral-800/75 dark:to-neutral-900/85","backdrop-blur-sm"],C=["bg-white/60 dark:bg-neutral-900/40","backdrop-blur-md"],S=["rounded-xl","shadow-md","border","border-neutral-200/70","dark:border-neutral-800/70"],j=["rounded-2xl","shadow-lg","ring-1","ring-neutral-200/60","dark:ring-neutral-700/50"],u=["rounded-xl","shadow-lg","border","border-white/25","dark:border-white/10"],T=["px-5 sm:px-6","py-4 sm:py-5"],N=["px-6 sm:px-8","py-5 sm:py-6"],E=[...w.variant==="accent"?c:w.variant==="glass"?C:n,...w.variant==="accent"?j:w.variant==="glass"?u:S,...w.variant==="accent"?N:T].join(" "),k=w.align==="stretch"?"self-stretch":w.align==="auto"?"":"self-start",b=[E,k,w.class].filter(Boolean).join(" "),B={marginTop:"5cm"};return(O,F)=>(a(),r("div",{class:D(P(b)),style:B},[Ee(O.$slots,"default")],2))}}),we=Object.assign(nt,{__name:"UiPanel"}),rt="px-3 py-1 text-sm !text-black dark:!text-white",it=Y({__name:"UiPrevButton",props:{disabled:{type:Boolean,default:!1},class:{},label:{default:"Anterior"}},emits:["click"],setup(v,{emit:w}){const n=v,c=w,C=[rt,n.class].filter(Boolean).join(" ");function S(){n.disabled||c("click")}return(j,u)=>(a(),X(G,{is:"button",disabled:v.disabled,class:D(P(C)),onClick:S,"aria-label":"Anterior"},{default:A(()=>[J(p(v.label),1)]),_:1},8,["disabled","class"]))}}),ut=Object.assign(it,{__name:"UiPrevButton"}),dt="px-3 py-1 text-sm !text-black dark:!text-white",ct=Y({__name:"UiNextButton",props:{disabled:{type:Boolean,default:!1},class:{},label:{default:"PrÃ³xima"}},emits:["click"],setup(v,{emit:w}){const n=v,c=w,C=[dt,n.class].filter(Boolean).join(" ");function S(){n.disabled||c("click")}return(j,u)=>(a(),X(G,{is:"button",disabled:v.disabled,class:D(P(C)),onClick:S,"aria-label":"PrÃ³xima"},{default:A(()=>[J(p(v.label),1)]),_:1},8,["disabled","class"]))}}),mt=Object.assign(ct,{__name:"UiNextButton"}),pt=Y({__name:"ProductActionButtons",props:{item:{},class:{},orientation:{default:"vertical"},fullWidth:{type:Boolean,default:!0},showDetails:{type:Boolean,default:!0},showCompare:{type:Boolean,default:!0},showCart:{type:Boolean,default:!0},showApplications:{type:Boolean,default:!0},showTechInfo:{type:Boolean,default:!0},detailsLabel:{default:"Detalhes"},compareLabel:{default:"Comparar Produtos"},cartLabel:{default:"Carrinho"},applicationsLabel:{default:"AplicaÃ§Ãµes"},techInfoLabel:{default:"Info. TÃ©cnicas"}},emits:["details","compare","cart","applications","techInfo"],setup(v,{emit:w}){const n=v,c=w,{add:C}=fe(),{add:S}=Ae(),j=_(!1),u=_(null),T=_(!1),N=I(()=>[n.orientation==="vertical"?"mt-2 space-y-2 flex flex-col items-center justify-center":"mt-2 flex items-center justify-center gap-2",n.class].filter(Boolean).join(" ")),E=I(()=>[n.fullWidth?"w-3/4":"","h-6 px-4 py-1 gap-1 text-xs !text-black dark:!text-white pointer-events-auto"].filter(Boolean).join(" "));async function k(){c("details",n.item);const o=n.item?.id,s=n.item?.part_number??n.item?.codigo??n.item?.sku;if(!(o==null&&!s)){T.value=!0;try{const y=await $fetch("/api/produtos/details",{params:{id:o,part_number:s}});y?.item&&(u.value=y.item,j.value=!0)}catch{}finally{T.value=!1}}}function b(){const o=n.item||{},s=o.id??o.part_number??o.codigo??o.sku,y=o.nome??o.descricao??o.titulo??o.part_number??`Produto ${s??""}`,q=o.fabricante??o.marca??"QUALITEC";s!=null&&C({id:s,title:y,brand:q}),c("compare",n.item)}function B(){const o=n.item||{},s=o.id??o.part_number??o.codigo??o.sku,y=o.nome??o.descricao??o.titulo??o.part_number??`Produto ${s??""}`,q=o.fabricante??o.marca??"QUALITEC",V=o.categoria,Q=o.diametro_montagem,Z=o.conexao_instrumento,z=o.faixa_trabalho,H=o.unidade_leitura;s!=null&&S({id:s,title:y,brand:q,categoria:V,diametro_montagem:Q,conexao_instrumento:Z,faixa_trabalho:z,unidade_leitura:H},1),c("cart",n.item)}function O(){c("applications",n.item)}function F(){c("techInfo",n.item)}function h(o){if(!u.value)return;const s=u.value,y=s.id??s.part_number,q=s.titulo??s.nome??s.descricao??s.part_number??`Produto ${y??""}`,V=s.fabricante??"QUALITEC";S({id:y,title:q,brand:V,categoria:s.categoria,diametro_montagem:s.diametro_montagem,conexao_instrumento:s.conexao_instrumento,faixa_trabalho:s.faixa_trabalho,unidade_leitura:s.unidade_leitura},Math.max(1,o))}function t(){try{const o=u.value?.imagens,s=Array.isArray(o)?o:o?JSON.parse(String(o)):[],y=Array.isArray(s)?s.find(q=>typeof q=="string"&&q.toLowerCase().endsWith(".pdf")):s?.pdf;y&&window.open(String(y),"_blank")}catch{}}return(o,s)=>(a(),r(K,null,[e("div",{class:D(N.value)},[v.showDetails?(a(),X(G,{key:0,type:"button",class:D(E.value),onClick:k,"aria-label":"Detalhes"},{default:A(()=>[s[1]||(s[1]=e("span",{class:"i-lucide-info"},null,-1)),J(" "+p(v.detailsLabel),1)]),_:1},8,["class"])):U("",!0),v.showCompare?(a(),X(G,{key:1,type:"button",class:D(E.value),onClick:b,"aria-label":"Comparar"},{default:A(()=>[s[2]||(s[2]=e("span",{class:"i-lucide-scale"},null,-1)),J(" "+p(v.compareLabel),1)]),_:1},8,["class"])):U("",!0),v.showApplications?(a(),X(G,{key:2,type:"button",class:D(E.value),onClick:O,"aria-label":"AplicaÃ§Ãµes"},{default:A(()=>[s[3]||(s[3]=e("span",{class:"i-lucide-layers"},null,-1)),J(" "+p(v.applicationsLabel),1)]),_:1},8,["class"])):U("",!0),v.showTechInfo?(a(),X(G,{key:3,type:"button",class:D(E.value),onClick:F,"aria-label":"Info. TÃ©cnicas"},{default:A(()=>[s[4]||(s[4]=e("span",{class:"i-lucide-file-text"},null,-1)),J(" "+p(v.techInfoLabel),1)]),_:1},8,["class"])):U("",!0),v.showCart?(a(),X(G,{key:4,type:"button",class:D(E.value),onClick:B,"aria-label":"Carrinho"},{default:A(()=>[s[5]||(s[5]=e("span",{class:"i-lucide-shopping-cart"},null,-1)),J(" "+p(v.cartLabel),1)]),_:1},8,["class"])):U("",!0)],2),j.value&&u.value?(a(),X(Ie,{key:0,visible:j.value,product:u.value,onClose:s[0]||(s[0]=y=>j.value=!1),onAddCart:h,onDownloadPdf:t},null,8,["visible","product"])):U("",!0)],64))}}),ft=Object.assign(re(pt,[["__scopeId","data-v-fd7a5ab9"]]),{__name:"ProductActionButtons"}),vt={class:"px-4 pb-4 pt-6 bg-white/40 dark:bg-neutral-900/30 backdrop-blur-md"},bt={class:"flex items-center justify-between w-full"},gt={class:"text-xs font-semibold tracking-wide text-blue-600 dark:text-blue-400"},xt={class:"ml-auto flex items-center gap-2"},ht={class:"mt-2 space-y-1 text-sm"},kt={class:"flex justify-between"},yt={class:"font-medium text-neutral-800 dark:text-neutral-100"},_t={class:"flex justify-between"},wt={class:"font-medium text-neutral-800 dark:text-neutral-100"},Ct={class:"flex justify-between"},$t={class:"font-medium text-neutral-800 dark:text-neutral-100"},Pt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center",role:"dialog","aria-modal":"true"},St=Y({__name:"ProductCardContent",props:{item:{}},emits:["details","compare","cart"],setup(v,{emit:w}){const n=v,c=w,C=I(()=>{const h=n.item?.faixa_trabalho?String(n.item.faixa_trabalho):"",t=n.item?.unidade_leitura?String(n.item.unidade_leitura):"";return`${h}${t?" "+t:""}`}),{has:S,toggle:j}=je(),u=I(()=>{const h=n.item||{};return h.id??h.part_number??h.codigo??h.sku}),T=I(()=>{const h=n.item||{},t=u.value;return h.nome??h.descricao??h.titulo??h.part_number??(t!=null?`Produto ${t}`:"Produto")}),N=I(()=>{const h=n.item||{};return h.fabricante??h.marca??"QUALITEC"}),E=I(()=>{const h=u.value;return h!=null?S(h):!1});function k(){const h=u.value;h!=null&&j({id:h,title:T.value,brand:N.value})}const b=_(!1),B=()=>{b.value=!0},O=()=>{b.value=!1},F=h=>{h.key==="Escape"&&O()};return ye(()=>{window.addEventListener("keydown",F)}),Be(()=>{window.removeEventListener("keydown",F)}),(h,t)=>(a(),r("div",vt,[e("div",bt,[e("div",gt,p(v.item.fabricante||"QUALITEC"),1),e("div",xt,[M(Me,{active:E.value,size:"w-7 h-7","aria-label":"Favoritar",title:"Favoritar",onToggle:k},null,8,["active"]),e("button",{type:"button",class:"text-blue-600 hover:text-blue-700 dark:text-blue-400","aria-label":"Ajuda",onClick:B},[...t[3]||(t[3]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"1.8"}),e("path",{d:"M9.1 9a3 3 0 0 1 5.8 1c0 2-3 2-3 4",stroke:"currentColor","stroke-width":"1.8","stroke-linecap":"round"}),e("circle",{cx:"12",cy:"17",r:"1",fill:"currentColor"})],-1)])])])]),e("div",ht,[e("div",kt,[t[4]||(t[4]=e("span",{class:"text-neutral-500 dark:text-neutral-400"},"DiÃ¢metro:",-1)),e("span",yt,p(v.item.diametro_montagem),1)]),e("div",_t,[t[5]||(t[5]=e("span",{class:"text-neutral-500 dark:text-neutral-400"},"ConexÃ£o:",-1)),e("span",wt,p(v.item.conexao_instrumento),1)]),e("div",Ct,[t[6]||(t[6]=e("span",{class:"text-neutral-500 dark:text-neutral-400"},"Faixa de PressÃ£o:",-1)),e("span",$t,p(C.value),1)])]),M(ft,{class:"mt-4",item:v.item,onDetails:t[0]||(t[0]=o=>c("details",v.item)),onCompare:t[1]||(t[1]=o=>c("compare",v.item)),onCart:t[2]||(t[2]=o=>c("cart",v.item))},null,8,["item"]),(a(),X(Te,{to:"body"},[M(ke,{name:"fade"},{default:A(()=>[b.value?(a(),r("div",Pt,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:O}),M(ke,{name:"scale"},{default:A(()=>[e("div",{class:"relative z-10 mx-4 w-full max-w-[calc(42rem+10cm)] rounded-2xl bg-white/90 dark:bg-neutral-900/80 shadow-2xl ring-1 ring-black/10 dark:ring-white/10"},[e("div",{class:"flex items-center justify-between px-5 py-4 border-b border-neutral-200/70 dark:border-neutral-800"},[t[8]||(t[8]=e("h3",{class:"text-lg font-semibold text-neutral-900 dark:text-neutral-100"},"O que Ã© um medidor (ManÃ´metro) de pressÃ£o?",-1)),e("button",{type:"button",class:"p-2 rounded-md hover:bg-neutral-100 dark:hover:bg-neutral-800","aria-label":"Fechar",onClick:O},[...t[7]||(t[7]=[e("svg",{class:"h-4 w-4",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true"},[e("path",{d:"M6 6l12 12M18 6L6 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])])]),e("div",{class:"px-5 py-4 text-sm leading-relaxed text-neutral-700 dark:text-neutral-300 space-y-4 max-h-[70vh] overflow-y-auto"},[t[9]||(t[9]=e("p",null,"Os manÃ´metros sÃ£o instrumentos para medir e exibir a pressÃ£o de um meio. Os manÃ´metros sÃ£o instrumentos de mediÃ§Ã£o de pressÃ£o com elementos de pressÃ£o elÃ¡sticos, que foram usados milhÃµes de vezes em vÃ¡rias aplicaÃ§Ãµes industriais. Dependendo da Ã¡rea de aplicaÃ§Ã£o do manÃ´metro, os tubos Bourdon, elementos de diafragma ou elementos de cÃ¡psula sÃ£o usados como elementos de pressÃ£o.",-1)),t[10]||(t[10]=e("h4",{class:"mt-2 text-base font-semibold text-neutral-900 dark:text-neutral-100"},"Quais pressÃµes sÃ£o medidas pelos manÃ´metros?",-1)),t[11]||(t[11]=e("p",null,"Os manÃ´metros medem a pressÃ£o manomÃ©trica, a pressÃ£o absoluta e a pressÃ£o diferencial. AlÃ©m disso, os manÃ´metros Qualitec podem ser usados nÃ£o apenas para medir a pressÃ£o manomÃ©trica positiva, mas tambÃ©m para medir a pressÃ£o manomÃ©trica negativa.",-1)),t[12]||(t[12]=e("h4",{class:"mt-2 text-base font-semibold text-neutral-900 dark:text-neutral-100"},"Como funciona um medidor de pressÃ£o?",-1)),t[13]||(t[13]=e("p",null,"Os manÃ´metros funcionam de forma diferente dependendo do tipo. Na tecnologia de mediÃ§Ã£o industrial, sÃ£o usados dois tipos diferentes de manÃ´metros - manÃ´metros com tubo Bourdon e manÃ´metros com diafragma. Eles tÃªm princÃ­pios funcionais diferentes e, portanto, sÃ£o adequados para diferentes aplicaÃ§Ãµes.",-1)),t[14]||(t[14]=e("p",null,"Nos manÃ´metros com tubo Bourdon, a pressÃ£o Ã© medida por um tubo Bourdon que transmite a pressÃ£o diretamente ao ponteiro. Dentro da caixa hÃ¡ um tubo curvo, no qual o meio entra e faz com que o tubo Bourdon se estique. Esse estiramento Ã© transmitido ao movimento por meio de um segmento dentado e Ã© exibido no mostrador como a deflexÃ£o correspondente.",-1)),t[15]||(t[15]=e("p",null,"Os manÃ´metros de tubo Bourdon podem ser usados de vÃ¡rias maneiras e abrangem a maioria das aplicaÃ§Ãµes. Entretanto, quando atingem seus limites, sÃ£o usados manÃ´metros de diafragma. Nos manÃ´metros de diafragma, a pressÃ£o Ã© transmitida por meio de um diafragma em forma de onda para um elo. Isso transfere a pressÃ£o para o movimento.",-1)),t[16]||(t[16]=e("h4",{class:"mt-2 text-base font-semibold text-neutral-900 dark:text-neutral-100"},"De que material deve ser feito o meu manÃ´metro?",-1)),t[17]||(t[17]=e("p",null,"A Qualitec oferece todas as formas comuns de caixas. Para aplicaÃ§Ãµes padrÃ£o, uma versÃ£o de plÃ¡stico com um sistema de mediÃ§Ã£o de liga de cobre Ã© suficiente para meios neutros, como ar comprimido, Ã¡gua ou Ã³leo. Para aplicaÃ§Ãµes hidrÃ¡ulicas, recomendamos uma caixa cromada robusta com um enchimento de glicerina que amortece o sistema de mediÃ§Ã£o contra vibraÃ§Ãµes e, portanto, garante uma boa legibilidade do instrumento.",-1)),t[18]||(t[18]=e("p",null,"Para tarefas de mediÃ§Ã£o em substÃ¢ncias agressivas, nÃ£o altamente viscosas e nÃ£o cristalizantes, mesmo em ambientes agressivos, as variantes do manÃ´metro feitas de aÃ§o inoxidÃ¡vel sÃ£o adequadas. O sistema de mediÃ§Ã£o tambÃ©m pode ser revestido com um material especial, como PTFE, ouro, Hastelloy e muitos outros. Isso protege o instrumento de meios agressivos.",-1)),t[19]||(t[19]=e("h4",{class:"mt-2 text-base font-semibold text-neutral-900 dark:text-neutral-100"},"O que significa a classe de precisÃ£o de um medidor de pressÃ£o?",-1)),t[20]||(t[20]=e("p",null,"No mostrador de um medidor de pressÃ£o, sempre encontramos uma indicaÃ§Ã£o da classe de precisÃ£o. A classe de precisÃ£o de um medidor de pressÃ£o define o desvio permitido do mostrador em porcentagem do valor total da escala. Para caixas de plÃ¡stico, esse desvio Ã© de 4% ou 2,5%, enquanto para instrumentos de aÃ§o cromado ou aÃ§o inoxidÃ¡vel Ã© de 1,6% ou 1,0%.",-1)),t[21]||(t[21]=e("p",null,"Para manÃ´metros de teste, a classe de precisÃ£o Ã© de 0,6%, 0,25% ou atÃ© 0,1%, dependendo da faixa de exibiÃ§Ã£o usada. O que isso significa na prÃ¡tica? Com uma faixa de mediÃ§Ã£o de 0 a 100 bar e uma classe de precisÃ£o de 1,0%, o desvio permitido Ã© de 1 bar em toda a faixa de mediÃ§Ã£o.",-1)),e("div",{class:"mt-3 flex justify-end gap-2"},[e("button",{type:"button",class:"px-3 py-2 text-sm font-medium rounded-md bg-neutral-900 text-white dark:bg-white dark:text-neutral-900 hover:opacity-90",onClick:O},"Entendi")])])])]),_:1})])):U("",!0)]),_:1})]))]))}}),Et=Object.assign(re(St,[["__scopeId","data-v-cf4adfab"]]),{__name:"ProductCardContent"}),It={class:"mt-4"},At={class:"flex items-center justify-between text-sm text-neutral-600 dark:text-neutral-300"},jt={class:"font-medium"},Bt={class:"mt-4"},Mt={key:0,class:"py-3 text-neutral-600 dark:text-neutral-300"},Tt={key:1,class:"py-3 text-neutral-600 dark:text-neutral-300"},Ot={key:2,class:"neon-green-wrap"},Ft={class:"grid grid-cols-2 2xl:grid-cols-3 gap-6 2xl:gap-8"},Lt={class:"relative group"},Dt=["src","onClick"],Ut={class:"absolute bottom-2 right-2 flex gap-2"},Nt=["onClick","aria-label"],qt=["src"],zt={class:"mt-6 flex items-center justify-between"},Rt={class:"mt-3 flex items-center justify-between text-sm text-neutral-600 dark:text-neutral-300"},Vt={class:"font-medium"},Qt=["src"],Gt={class:"mt-3 text-center"},Ht=["href"],Wt=Y({__name:"ProductsGrid",props:{items:{},loading:{type:Boolean},resultsCount:{},selectedCategory:{},currentPage:{},totalPages:{},class:{}},emits:["details","compare","cart","prev","next"],setup(v,{emit:w}){const n=v,c=w,{items:C,loading:S,resultsCount:j,selectedCategory:u,currentPage:T,totalPages:N}=Oe(n),E=["https://ibb.co/cKQDTSdv","https://ibb.co/B2kWrRJ6","https://ibb.co/xqCRsnQF"],k=_(!1),b=_([]),B=_([]),O=_(0),F=_(null);function h(l){return l.startsWith("https://ibb.co/")?`/api/imgbb?u=${encodeURIComponent(l)}`:l}function t(l){return E.map(h)}function o(l){const m=l.target;m&&(m.src="/manometro.png")}function s(l,m=0){b.value=t(),B.value=E.slice(),O.value=m,k.value=!0}function y(){k.value=!1}const q=I(()=>{const l=b.value;return!l||!l.length?"/manometro.png":l[Math.max(0,Math.min(O.value,l.length-1))]});function V(){const l=b.value;!l||!l.length||(O.value=(O.value+1)%l.length)}function Q(){const l=b.value;!l||!l.length||(O.value=(O.value+l.length-1)%l.length)}function Z(l){return typeof l=="string"&&l.startsWith("https://ibb.co/")}const z=I(()=>{const l=B.value;return!l||!l.length?"":l[Math.max(0,Math.min(O.value,l.length-1))]});function H(){try{const l=F.value;l&&l.requestFullscreen?l.requestFullscreen():l&&l.webkitRequestFullscreen&&l.webkitRequestFullscreen()}catch{}}function te(l){k.value&&(l.key==="ArrowRight"?V():l.key==="ArrowLeft"&&Q())}return de(k,l=>{l?window.addEventListener("keydown",te):window.removeEventListener("keydown",te)}),(l,m)=>(a(),r(K,null,[M(we,{class:"flex-1",variant:"accent"},{default:A(()=>[m[4]||(m[4]=e("h1",{class:"text-xl font-semibold text-neutral-800 dark:text-neutral-100"},"CatÃ¡logo",-1)),m[5]||(m[5]=e("p",{class:"mt-2 text-sm text-neutral-600 dark:text-neutral-300"},"Resultados atuais conforme filtros.",-1)),e("div",It,[e("div",At,[e("div",null,[m[2]||(m[2]=J(" Categoria: ",-1)),e("span",jt,p(P(u)),1),J(" Â· PÃ¡gina "+p(P(T))+" de "+p(P(N)),1)]),e("div",null,p(P(j))+" produtos ",1)]),e("div",Bt,[P(S)?(a(),r("div",Mt,"Carregando...")):P(C).length===0?(a(),r("div",Tt,"Nenhum produto encontrado.")):(a(),r("div",Ot,[e("div",Ft,[(a(!0),r(K,null,ee(P(C),f=>(a(),r("div",{key:f.id,class:"rounded-xl overflow-hidden border border-white/25 dark:border-white/10 shadow-lg bg-white/60 dark:bg-neutral-900/40 backdrop-blur-md"},[e("div",Lt,[e("img",{src:t(f)[0],class:"h-28 w-full object-cover",alt:"Imagem do produto",onError:o,onClick:$=>s(f,0)},null,40,Dt),e("div",Ut,[(a(!0),r(K,null,ee(t(f).slice(1,3),($,R)=>(a(),r("button",{key:"thumb-"+R,type:"button",class:"h-9 w-9 rounded-md overflow-hidden shadow-sm ring-1 ring-white/40 dark:ring-neutral-700/60",onClick:_e(ve=>s(f,R+1),["stop"]),"aria-label":"Abrir imagem "+(R+2)},[e("img",{src:$,class:"h-full w-full object-cover",alt:"Miniatura",onError:o},null,40,qt)],8,Nt))),128))])]),M(Et,{item:f,onDetails:$=>c("details",f),onCompare:$=>c("compare",f),onCart:$=>c("cart",f)},null,8,["item","onDetails","onCompare","onCart"])]))),128))])]))]),e("div",zt,[M(ut,{disabled:P(T)<=1||P(S),onClick:m[0]||(m[0]=f=>c("prev"))},null,8,["disabled"]),M(mt,{disabled:P(T)>=P(N)||P(S),onClick:m[1]||(m[1]=f=>c("next"))},null,8,["disabled"])]),e("div",Rt,[e("div",null,[m[3]||(m[3]=J(" Categoria: ",-1)),e("span",Vt,p(P(u)),1),J(" Â· PÃ¡gina "+p(P(T))+" de "+p(P(N)),1)]),e("div",null,p(P(j))+" produtos ",1)])])]),_:1}),M(Fe,{visible:k.value,"with-backdrop":!0,"close-on-backdrop":!0,"close-on-esc":!0,"show-close-button":!0,"close-button-placement":"left","panel-class":"w-screen h-screen p-0 bg-transparent",onClose:y},{default:A(()=>[e("div",{ref_key:"galleryEl",ref:F,class:"relative w-full h-full"},[e("img",{src:q.value,class:"max-h-full h-full w-auto max-w-full mx-auto object-contain",alt:"Imagem ampliada",onError:o},null,40,Qt),e("button",{type:"button",class:"absolute left-2 top-1/2 -translate-y-1/2 rounded-full bg-white/80 dark:bg-neutral-800/80 px-3 py-2 shadow text-2xl",onClick:Q,"aria-label":"Imagem anterior"}," < "),e("button",{type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 rounded-full bg-white/80 dark:bg-neutral-800/80 px-3 py-2 shadow text-2xl",onClick:V,"aria-label":"PrÃ³xima imagem"}," > "),e("div",{class:"absolute top-2 right-2 flex items-center gap-3"},[e("button",{type:"button",class:"rounded-md bg-white/80 dark:bg-neutral-800/80 px-3 py-1 text-sm shadow",onClick:H}," Tela cheia ")])],512),e("div",Gt,[z.value&&Z(z.value)?(a(),r("a",{key:0,href:z.value,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 hover:underline dark:text-blue-400"}," Abrir imagem original ",8,Ht)):U("",!0)])]),_:1},8,["visible"])],64))}}),Jt=Object.assign(re(Wt,[["__scopeId","data-v-5911e9d6"]]),{__name:"ProductsGrid"}),Kt={class:"flex items-center justify-between"},Xt={class:"text-lg font-semibold text-neutral-800 dark:text-neutral-100"},Yt={class:"mt-3 space-y-3"},Zt={class:"flex-1"},ea={class:"text-sm font-medium text-neutral-800 dark:text-neutral-100 leading-snug"},ta={key:0,class:"text-xs text-neutral-600 dark:text-neutral-300"},aa=["onClick"],oa=Y({__name:"CompareSidebar",setup(v){const{items:w,count:n,MAX_ITEMS:c,clear:C,remove:S,canCompare:j}=fe(),u=Le();function T(){if(!j.value)return;const E=w.value.map(k=>String(k.id)).join(",");u.push({path:"/comparar",query:{ids:E}}).catch(()=>{})}const N=I(()=>n.value>1);return(E,k)=>(a(),X(we,{class:"w-full md:w-48 lg:w-60 xl:w-[17rem]",align:"start",variant:"glass"},{default:A(()=>[e("div",Kt,[e("h2",Xt," Comparar Produtos ("+p(P(n))+"/"+p(P(c))+") ",1),P(n)>0?(a(),r("button",{key:0,type:"button",class:"text-sm text-red-500 hover:text-red-600",onClick:k[0]||(k[0]=b=>P(C)())}," Limpar ")):U("",!0)]),e("div",Yt,[P(w).length===0?(a(),r(K,{key:0},[k[2]||(k[2]=e("div",{class:"rounded-lg border border-dashed border-neutral-300/70 dark:border-neutral-700/70 h-40 md:h-48 flex items-center justify-center text-neutral-500 dark:text-neutral-400"}," Nenhum produto selecionado ",-1)),k[3]||(k[3]=e("div",{class:"hidden md:block text-xs text-neutral-500 dark:text-neutral-400"}," Dica: clique em â€œCompararâ€ nos cards para adicionar aqui. ",-1))],64)):(a(),r(K,{key:1},[(a(!0),r(K,null,ee(P(w),b=>(a(),r("div",{key:b.id,class:"flex items-start gap-3 rounded-lg border border-neutral-300/70 dark:border-neutral-700/70 bg-neutral-50 dark:bg-neutral-800/40 px-3 py-3"},[k[5]||(k[5]=e("div",{class:"flex h-9 w-9 shrink-0 items-center justify-center rounded-md bg-blue-600/10 text-blue-600"},[e("svg",{viewBox:"0 0 24 24",class:"h-5 w-5",fill:"none",stroke:"currentColor","stroke-width":"1.6"},[e("path",{d:"M3 7h18M3 12h18M3 17h18","stroke-linecap":"round"})])],-1)),e("div",Zt,[e("div",ea,p(b.title),1),b.brand?(a(),r("div",ta,p(b.brand),1)):U("",!0)]),e("button",{type:"button",class:"ml-auto text-neutral-500 hover:text-red-600",onClick:B=>P(S)(b.id),"aria-label":"Remover",title:"Remover"},[...k[4]||(k[4]=[e("svg",{viewBox:"0 0 24 24",class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"1.6"},[e("path",{d:"M6 6l12 12M18 6l-12 12","stroke-linecap":"round"})],-1)])],8,aa)]))),128)),M(G,{type:"button",class:D(["w-full mt-2 gap-2 text-sm !text-black dark:!text-white",N.value?"pulse-strong ring-2 ring-yellow-400 shadow-xl shadow-yellow-300/50 dark:ring-yellow-300 dark:shadow-yellow-300/40":""]),disabled:!P(j),onClick:k[1]||(k[1]=b=>T()),"aria-label":"Comparar Produtos"},{default:A(()=>[...k[6]||(k[6]=[e("svg",{viewBox:"0 0 24 24",class:"h-4 w-4",fill:"none",stroke:"currentColor","stroke-width":"1.6"},[e("path",{d:"M6 12h12M6 7h12M6 17h12","stroke-linecap":"round"})],-1),J(" Comparar Produtos ",-1)])]),_:1},8,["class","disabled"])],64))])]),_:1}))}}),sa=Object.assign(re(oa,[["__scopeId","data-v-12d81933"]]),{__name:"CompareSidebar"}),la={class:"min-h-screen w-full relative overflow-hidden"},na={class:"relative z-10 mx-auto max-w-7xl 2xl:max-w-[1600px] px-4 2xl:px-6 py-8"},ra={class:"flex flex-col md:flex-row gap-6"},ia={class:"fixed bottom-6 right-6 z-50 pointer-events-none"},ua={key:0,class:"flex justify-end pointer-events-auto"},da={key:1,class:"w-[92vw] max-w-sm sm:max-w-md md:max-w-lg pointer-events-auto"},ca={class:"rounded-xl border border-neutral-200 dark:border-neutral-800 bg-white/90 dark:bg-neutral-900/90 backdrop-blur-md shadow-xl"},ma={class:"h-[50vh] max-h-[60vh] overflow-y-auto px-4 py-2 space-y-3"},pa={class:"text-sm whitespace-pre-wrap"},fa={key:0,class:"flex justify-start"},va={class:"px-4 py-3 border-t border-neutral-200 dark:border-neutral-800"},ba={class:"flex flex-col gap-3"},ga={key:0,class:"flex flex-wrap items-center gap-2"},xa={key:0,class:"i-lucide-loader-2 animate-spin"},ha={key:1,class:"i-lucide-check"},ka={key:2,class:"i-lucide-mail"},ya={key:1,class:"flex flex-col gap-2"},_a=["checked","onChange"],wa={class:"text-sm"},Ca={key:2,class:"flex items-center gap-2"},Sa=Y({__name:"produtos",setup(v){const w=_(0),n=_(1),c=_(6),C=_("Todas as categorias"),S=_({}),j=_([]),u=_(!1),T=I(()=>Math.max(1,Math.ceil(w.value/c.value)));function N(g){C.value=g.category,S.value=g.filters,n.value=1,E()}async function E(){u.value=!0;try{const g=await $fetch("/api/produtos/search",{params:{categoria:C.value,page:n.value,pageSize:c.value,filters:JSON.stringify(S.value)}});j.value=g?.items||[],w.value=g?.total||0}catch{}finally{u.value=!1}}function k(){n.value>1&&(n.value-=1,E())}function b(){n.value<T.value&&(n.value+=1,E())}function B(g){console.log("Detalhes",g?.id||g?.part_number)}function O(g){console.log("Comparar",g?.id||g?.part_number)}function F(g){console.log("Adicionar ao carrinho",g?.id||g?.part_number)}const h=_(!1),t=_([]),o=_(""),s=_(!1),y=_([]),q=_(!1),V=_(""),Q=_(!1),Z=_(!1),z=_([]),H=_(!1);function te(){h.value=!0,t.value.length||t.value.push({role:"assistant",content:`ðŸ‘‹ Bem-vindo ao Chat de Busca TÃ©cnica da Qualitec!
Descreva o produto que procura (ex: â€œmanÃ´metro 2Â½â€ 0â€“6 bar Â¼ NPTâ€).

ðŸ’¡ Eu reconheÃ§o termos como rosca, polegada, glicerina, faixa de pressÃ£o, etc.

âš ï¸ Este chat Ã© apenas para busca de produtos, nÃ£o para suporte geral.`})}function l(){h.value=!1}async function m(){const g=String(o.value||"").trim();if(g){t.value.push({role:"user",content:g}),o.value="",s.value=!0;try{const{email:x,empresaId:L}=me(),i=await $fetch("/api/chat",{method:"POST",body:{messages:t.value,userEmail:x.value,empresaId:L.value}}),d=i?.text||"Desculpe, nÃ£o consegui responder agora.";if(t.value.push({role:"assistant",content:d}),y.value=Array.isArray(i?.items)?i.items:[],q.value=/Informe seu endereÃ§o de email/i.test(d),Z.value=Number(i?.total||0)>=2&&Number(i?.total||0)<=3,(Number(i?.total||0)||y.value.length)<=3?z.value=(y.value||[]).slice(0,1).map(W=>String(W.part_number||W.id)):z.value=[],i?.filters||i?.categoria){C.value=i?.categoria||C.value;const W=i?.filters||{},ae={};for(const[ie,le]of Object.entries(W)){const ce=le==null?null:String(le);ae[ie]=ce}S.value=ae,n.value=1,await E()}}catch{t.value.push({role:"assistant",content:"Ocorreu um erro ao responder."})}finally{s.value=!1}}}function f(){const g=Array.isArray(y.value)?y.value:[],x=new Set((z.value||[]).map(d=>String(d))),L=g.filter(d=>x.has(String(d.part_number||d.id)));return(L.length?L:g.slice(0,1)).map(d=>({id:d.part_number||d.id,title:d.part_number||"",brand:d.fabricante||"QUALITEC",quantity:1,categoria:d.categoria,diametro_montagem:d.diametro_montagem,conexao_instrumento:d.conexao_instrumento,faixa_trabalho:d.faixa_trabalho,unidade_leitura:d.unidade_leitura,tipo_medicao:d.tipo_medicao,posicao_montagem:d.posicao_montagem,material_involucro:d.material_involucro,material_internos:d.material_internos,visor:d.visor,classe_exatidao:d.classe_exatidao,glicerina:d.glicerina,certificados:d.certificados,tubo_sifao:d.tubo_sifao,selo_diafragma:d.selo_diafragma,contato_eletrico:d.contato_eletrico,valvula_isolamento:d.valvula_isolamento}))}function $(g){const x=String(g),L=z.value.indexOf(x);L>=0?z.value.splice(L,1):z.value.push(x)}function R(){z.value=(Array.isArray(y.value)?y.value:[]).slice(0,3).map(g=>String(g.part_number||g.id))}async function ve(){const{email:g,fullName:x,sector:L,whatsapp:i,empresaId:d}=me(),W=f(),ae=W.length?W.slice(0,1):[];z.value.length>1&&t.value.push({role:"assistant",content:"Para baixar, selecione apenas 1 produto nas opÃ§Ãµes acima."});const ie={items:ae,user:{email:g.value,fullName:x.value,sector:L.value,whatsapp:i.value},empresaId:d.value},le=await fetch("/api/download-order?format=pdf",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)}),ce=await le.blob(),Pe=le.headers.get("Content-Disposition")||"";let be="pedido_qualitec.pdf";const ge=/filename="([^"]+)"/i.exec(Pe||"");ge&&(be=ge[1]);const xe=URL.createObjectURL(ce),ne=document.createElement("a");ne.href=xe,ne.download=be,document.body.appendChild(ne),ne.click(),ne.remove(),URL.revokeObjectURL(xe)}async function Ce(){if(!Q.value){Q.value=!0,H.value=!1;try{const{email:g,empresaId:x}=me(),L=String(V.value||g.value||"").trim();if(!L){q.value=!0,t.value.push({role:"assistant",content:"Informe seu endereÃ§o de email para eu enviar o PDF."});return}const i={action:"send_email",userEmail:L,empresaId:x.value,order:{items:f(),user:{}}},d=await $fetch("/api/chat",{method:"POST",body:i}),W=d?.text||"Desculpe, nÃ£o consegui responder agora.";t.value.push({role:"assistant",content:W}),q.value=/Informe seu endereÃ§o de email/i.test(W),(d?.success||/Enviei o PDF do produto/i.test(W))&&(H.value=!0,setTimeout(()=>{H.value=!1},4e3))}catch{t.value.push({role:"assistant",content:"Ocorreu um erro ao enviar por email."})}finally{Q.value=!1}}}function $e(){const{add:g}=fe(),x=(Array.isArray(y.value)?y.value:[]).slice(0,3);let L=0;for(const i of x){const d=i.id??i.part_number??i.codigo??i.sku,W=i.nome??i.descricao??i.titulo??i.part_number??(d!=null?`Produto ${d}`:"Produto"),ae=i.fabricante??i.marca??"QUALITEC";d!=null&&g({id:d,title:W,brand:ae})?.ok&&L++}L>=2?t.value.push({role:"assistant",content:"Adicionei os produtos para comparaÃ§Ã£o."}):t.value.push({role:"assistant",content:"NÃ£o foi possÃ­vel preparar a comparaÃ§Ã£o."})}return(g,x)=>{const L=De;return a(),r(K,null,[e("section",la,[e("div",na,[e("div",ra,[M(L,null,{default:A(()=>[M(lt,{"results-count":w.value,"current-page":n.value,"page-size":c.value,onFiltersChange:N},null,8,["results-count","current-page","page-size"])]),_:1}),M(Jt,{items:j.value,loading:u.value,"results-count":w.value,"selected-category":C.value,"current-page":n.value,"total-pages":T.value,onDetails:B,onCompare:O,onCart:F,onPrev:k,onNext:b},null,8,["items","loading","results-count","selected-category","current-page","total-pages"]),M(L,null,{default:A(()=>[M(sa)]),_:1})])])]),M(L,null,{default:A(()=>[e("div",ia,[h.value?(a(),r("div",da,[e("div",ca,[e("div",{class:"flex items-center justify-between px-4 py-3"},[x[3]||(x[3]=e("div",{class:"flex items-center gap-2"},[e("span",{class:"i-lucide-bot"}),e("span",{class:"text-sm font-semibold"},"Assistente")],-1)),e("button",{type:"button",class:"rounded-md px-2 py-1 text-sm",onClick:l,"aria-label":"Fechar"},"Ã—")]),e("div",ma,[(a(!0),r(K,null,ee(t.value,(i,d)=>(a(),r("div",{key:d,class:D(i.role==="user"?"flex justify-end":"flex justify-start")},[e("div",{class:D(i.role==="user"?"max-w-[80%] rounded-lg bg-blue-50 dark:bg-blue-900/40 text-neutral-900 dark:text-neutral-100 px-3 py-2":"max-w-[80%] rounded-lg bg-neutral-100 dark:bg-neutral-800/60 text-neutral-800 dark:text-neutral-100 px-3 py-2")},[e("p",pa,p(i.content),1)],2)],2))),128)),s.value?(a(),r("div",fa,[...x[4]||(x[4]=[e("div",{class:"rounded-lg bg-neutral-100 dark:bg-neutral-800/60 px-3 py-2"},[e("span",{class:"i-lucide-loader-2 animate-spin"})],-1)])])):U("",!0)]),e("div",va,[e("div",ba,[y.value.length?(a(),r("div",ga,[M(G,{type:"button",class:D("gap-2 px-3 py-2 text-sm !text-black dark:!text-white"),onClick:ve},{default:A(()=>[...x[5]||(x[5]=[e("span",{class:"i-lucide-file-down"},null,-1),e("span",null,"Baixar PDF",-1)])]),_:1}),M(G,{type:"button",class:D("gap-2 px-3 py-2 text-sm !text-black dark:!text-white"),onClick:Ce,disabled:Q.value},{default:A(()=>[Q.value?(a(),r("span",xa)):H.value?(a(),r("span",ha)):(a(),r("span",ka)),e("span",null,p(Q.value?"Enviandoâ€¦":H.value?"E-mail enviado":"Enviar por e-mail"),1)]),_:1},8,["disabled"]),Z.value?(a(),X(G,{key:0,type:"button",class:D("gap-2 px-3 py-2 text-sm !text-black dark:!text-white"),onClick:$e},{default:A(()=>[...x[6]||(x[6]=[e("span",{class:"i-lucide-git-compare"},null,-1),e("span",null,"Comparar",-1)])]),_:1})):U("",!0)])):U("",!0),y.value.length&&y.value.length<=3?(a(),r("div",ya,[x[8]||(x[8]=e("div",{class:"text-xs text-neutral-600 dark:text-neutral-300"},"Selecione quais produtos enviar por e-mail:",-1)),(a(!0),r(K,null,ee(y.value.slice(0,3),i=>(a(),r("div",{key:i.id,class:"flex items-center gap-2"},[e("input",{type:"checkbox",checked:z.value.includes(String(i.part_number||i.id)),onChange:d=>$(String(i.part_number||i.id))},null,40,_a),e("span",wa,p(i.part_number||i.id)+" Â· "+p((i.faixa_trabalho||"")+(i.unidade_leitura?" "+i.unidade_leitura:"")),1)]))),128)),e("div",null,[M(G,{type:"button",class:D("gap-2 px-3 py-1 text-xs !text-black dark:!text-white"),onClick:R},{default:A(()=>[...x[7]||(x[7]=[J("Selecionar todos",-1)])]),_:1})])])):U("",!0),q.value?(a(),r("div",Ca,[se(e("input",{type:"text","onUpdate:modelValue":x[0]||(x[0]=i=>V.value=i),placeholder:"Informe email(s), separados por vÃ­rgula",class:"flex-1 rounded-md border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100 px-3 py-2 text-sm","aria-label":"Email(s)"},null,512),[[pe,V.value]])])):U("",!0),e("form",{onSubmit:_e(m,["prevent"]),class:"flex items-center gap-2"},[se(e("input",{type:"text","onUpdate:modelValue":x[1]||(x[1]=i=>o.value=i),placeholder:"Digite sua pergunta...",class:"flex-1 rounded-md border border-neutral-300 dark:border-neutral-700 bg-white dark:bg-neutral-800 text-neutral-800 dark:text-neutral-100 px-3 py-2 text-sm","aria-label":"Mensagem"},null,512),[[pe,o.value]]),M(G,{type:"submit",class:D("gap-2 px-3 py-2 text-sm !text-black dark:!text-white"),"aria-label":"Enviar"},{default:A(()=>[...x[9]||(x[9]=[e("span",{class:"i-lucide-send"},null,-1),e("span",null,"Enviar",-1)])]),_:1})],32)])])])])):(a(),r("div",ua,[M(G,{type:"button",class:D("gap-2 px-4 py-2 text-sm !text-black dark:!text-white rounded-full shadow-lg"),onClick:te,"aria-label":"Abrir Chat"},{default:A(()=>[...x[2]||(x[2]=[e("span",{class:"i-lucide-message-circle"},null,-1),e("span",null,"Chat",-1)])]),_:1})]))])]),_:1})],64)}}});export{Sa as default};
